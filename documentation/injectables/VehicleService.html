<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>tma-angular-app documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">tma-angular-app documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search">
</div>
            <nav>

    <ul class="list">

        <li class="title">
            <a href="index.html" data-type="index-link">tma-angular-app documentation</a>
        </li>

        <li class="divider"></li>


        <li class="chapter">
            <a data-type="chapter-link" href="index.html"><span class="fa fa-home"></span>Getting started</a>
            <ul class="links">
                    <li class="link">
                        <a 
                            
                             href="overview.html" 
                             href="overview.html" 
                            data-type="chapter-link">
                            <span class="fa fa-fw fa-th"></span>Overview
                        </a>
                    </li>
                    <li class="link">
                      <a href="index.html" data-type="chapter-link"><span class="fa fa-file-text-o"></span>README</a>
                    </li>
                    <li class="link">
                            <a href="license.html"
                        data-type="chapter-link">
                            <span class="fa fa-fw fa-file-text-o"></span>LICENSE
                        </a>
                    </li>
                    <li class="link">
                        <a href="dependencies.html"
                            data-type="chapter-link">
                            <span class="fa fa-fw fa-list"></span>Dependencies
                        </a>
                    </li>
            </ul>
        </li>



                <li class="chapter">
                    <div class="simple menu-toggler" data-toggle="collapse"
                            data-target="#xs-components-links"
                        >
                        <span class="fa fa-fw fa-cogs"></span>
                        <span>Components</span>
                        <span class="fa fa-angle-down"></span>
                    </div>
                    <ul class="links collapse"
                            id="xs-components-links"
                        >
                            <li class="link">
                                <a href="components/ErrorComponent.html" data-type="entity-link">ErrorComponent</a>
                            </li>
                            <li class="link">
                                <a href="components/LoadingDimmerComponent.html" data-type="entity-link">LoadingDimmerComponent</a>
                            </li>
                    </ul>
                </li>


        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#xs-classes-links"
                >
                <span class="fa fa-fw fa-file-code-o"></span>
                <span>Classes</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="xs-classes-links"
                >
                    <li class="link">
                        <a href="classes/Filter.html" data-type="entity-link">Filter</a>
                    </li>
                    <li class="link">
                        <a href="classes/Vehicle.html" data-type="entity-link">Vehicle</a>
                    </li>
            </ul>
        </li>

                <li class="chapter">
                    <div class="simple menu-toggler" data-toggle="collapse"
                            data-target="#xs-injectables-links"
                        >
                        <span class="fa fa-fw fa-long-arrow-down"></span>
                        <span>Injectables</span>
                        <span class="fa fa-angle-down"></span>
                    </div>
                    <ul class="links collapse"
                            id="xs-injectables-links"
                        >
                            <li class="link">
                                <a href="injectables/FilterService.html" data-type="entity-link">FilterService</a>
                            </li>
                            <li class="link">
                                <a href="injectables/VehicleService.html" data-type="entity-link">VehicleService</a>
                            </li>
                    </ul>
                </li>






        <li class="chapter">
            <a data-type="chapter-link" href="coverage.html"><span class="fa fa-fw fa-tasks"></span>Documentation coverage</a>
        </li>

        <li class="divider"></li>
        <li class="copyright">
                Documentation generated using <a href="https://compodoc.github.io/website/" target="_blank">
                            <img data-src="images/compodoc-vectorise.svg" class="img-responsive" data-type="compodoc-logo">
                </a>
        </li>

    </ul>

</nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>

    <ul class="list">

        <li class="title">
            <a href="index.html" data-type="index-link">tma-angular-app documentation</a>
        </li>

        <li class="divider"></li>

            <div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search">
</div>

        <li class="chapter">
            <a data-type="chapter-link" href="index.html"><span class="fa fa-home"></span>Getting started</a>
            <ul class="links">
                    <li class="link">
                        <a 
                            
                             href="overview.html" 
                             href="overview.html" 
                            data-type="chapter-link">
                            <span class="fa fa-fw fa-th"></span>Overview
                        </a>
                    </li>
                    <li class="link">
                      <a href="index.html" data-type="chapter-link"><span class="fa fa-file-text-o"></span>README</a>
                    </li>
                    <li class="link">
                            <a href="license.html"
                        data-type="chapter-link">
                            <span class="fa fa-fw fa-file-text-o"></span>LICENSE
                        </a>
                    </li>
                    <li class="link">
                        <a href="dependencies.html"
                            data-type="chapter-link">
                            <span class="fa fa-fw fa-list"></span>Dependencies
                        </a>
                    </li>
            </ul>
        </li>



                <li class="chapter">
                    <div class="simple menu-toggler" data-toggle="collapse"
                            data-target="#components-links"
>
                        <span class="fa fa-fw fa-cogs"></span>
                        <span>Components</span>
                        <span class="fa fa-angle-down"></span>
                    </div>
                    <ul class="links collapse"
                            id="components-links"
>
                            <li class="link">
                                <a href="components/ErrorComponent.html" data-type="entity-link">ErrorComponent</a>
                            </li>
                            <li class="link">
                                <a href="components/LoadingDimmerComponent.html" data-type="entity-link">LoadingDimmerComponent</a>
                            </li>
                    </ul>
                </li>


        <li class="chapter">
            <div class="simple menu-toggler" data-toggle="collapse"
                    data-target="#classes-links"
>
                <span class="fa fa-fw fa-file-code-o"></span>
                <span>Classes</span>
                <span class="fa fa-angle-down"></span>
            </div>
            <ul class="links collapse"
                    id="classes-links"
>
                    <li class="link">
                        <a href="classes/Filter.html" data-type="entity-link">Filter</a>
                    </li>
                    <li class="link">
                        <a href="classes/Vehicle.html" data-type="entity-link">Vehicle</a>
                    </li>
            </ul>
        </li>

                <li class="chapter">
                    <div class="simple menu-toggler" data-toggle="collapse"
                            data-target="#injectables-links"
>
                        <span class="fa fa-fw fa-long-arrow-down"></span>
                        <span>Injectables</span>
                        <span class="fa fa-angle-down"></span>
                    </div>
                    <ul class="links collapse"
                            id="injectables-links"
>
                            <li class="link">
                                <a href="injectables/FilterService.html" data-type="entity-link">FilterService</a>
                            </li>
                            <li class="link">
                                <a href="injectables/VehicleService.html" data-type="entity-link">VehicleService</a>
                            </li>
                    </ul>
                </li>






        <li class="chapter">
            <a data-type="chapter-link" href="coverage.html"><span class="fa fa-fw fa-tasks"></span>Documentation coverage</a>
        </li>

        <li class="divider"></li>
        <li class="copyright">
                Documentation generated using <a href="https://compodoc.github.io/website/" target="_blank">
                            <img data-src="images/compodoc-vectorise.svg" class="img-responsive" data-type="compodoc-logo">
                </a>
        </li>

    </ul>

</nav>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">






<ol class="breadcrumb">
  <li>Injectables</li>
  <li>VehicleService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/vehicle/vehicle.service.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>The Vehicle Service is responsible for most of the data logic.
It gets the data, it&#39;s also the job of the Service to keep track of the data and do some logic thing on them</p>

            </p>


            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#vehicleChoice">vehicleChoice</a>
                            </li>
                            <li>
                                <a href="#vehicles">vehicles</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#cleanDuplicates">cleanDuplicates</a>
                            </li>
                            <li>
                                <a href="#filterDataList">filterDataList</a>
                            </li>
                            <li>
                                <a href="#getVehiclesObservable">getVehiclesObservable</a>
                            </li>
                            <li>
                                <a href="#hasError">hasError</a>
                            </li>
                            <li>
                                <a href="#isLoading">isLoading</a>
                            </li>
                            <li>
                                <a href="#listAttributes">listAttributes</a>
                            </li>
                            <li>
                                <a href="#makeLists">makeLists</a>
                            </li>
                            <li>
                                <a href="#tryGettingVehicles">tryGettingVehicles</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(sfService: <a href="../injectables/FilterService.html">FilterService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="61" class="link-to-prism">src/app/vehicle/vehicle.service.ts:61</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Construct with injecting the FilterService and try to get the vehicles from the data source right away.</p>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>sfService</td>
                                                  
                                                        <td>
                                                                    <code><a href="../injectables/FilterService.html" target="_self" >FilterService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            no
                                                    </td>
                                                    
                                                        <td>
                                                                <code><p>inject the Filter Service to be up to date with the changed filters</p>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="methods">
            Methods
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="cleanDuplicates"></a>
                        <span class="name">
                            <b>
                            cleanDuplicates
                            </b>
                            <a href="#cleanDuplicates"><span class="fa fa-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>cleanDuplicates(arr: any[])</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="158" class="link-to-prism">src/app/vehicle/vehicle.service.ts:158</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Clean duplicates in the lists with Array.filter and sort them alphabetically at the end, a little UX friendlier.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>arr</td>
                                                        <td>
                                                                    <code>any[]</code>
                                                        </td>
                                                    
                                                    <td>
                                                            no
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>Provided array to clean dublicates.</p>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>any[]</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="filterDataList"></a>
                        <span class="name">
                            <b>
                            filterDataList
                            </b>
                            <a href="#filterDataList"><span class="fa fa-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>filterDataList()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="144" class="link-to-prism">src/app/vehicle/vehicle.service.ts:144</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Just a method to filter the main vehicles array according to the parameter that were chosen in the filters</p>
</div>

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="../classes/Vehicle.html" target="_self" >Vehicle[]</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="getVehiclesObservable"></a>
                        <span class="name">
                            <b>
                            getVehiclesObservable
                            </b>
                            <a href="#getVehiclesObservable"><span class="fa fa-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>getVehiclesObservable()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="179" class="link-to-prism">src/app/vehicle/vehicle.service.ts:179</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Get the vehicleObservable to subscribe on. This method creates and Observabble, fetches the data, waits for
the callback function to react and then reply accordingly by nexting or erroring</p>
</div>

                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="../classes/Vehicle.html" target="_self" >Observable&lt;Vehicle[]&gt;</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="hasError"></a>
                        <span class="name">
                            <b>
                            hasError
                            </b>
                            <a href="#hasError"><span class="fa fa-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>hasError()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="199" class="link-to-prism">src/app/vehicle/vehicle.service.ts:199</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>This function return an error of any type so the outside world can read it an act accordingly</p>
</div>

                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="isLoading"></a>
                        <span class="name">
                            <b>
                            isLoading
                            </b>
                            <a href="#isLoading"><span class="fa fa-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>isLoading()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="207" class="link-to-prism">src/app/vehicle/vehicle.service.ts:207</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>This function returns the loading boolean &#39;state&#39;</p>
</div>

                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="listAttributes"></a>
                        <span class="name">
                            <b>
                            listAttributes
                            </b>
                            <a href="#listAttributes"><span class="fa fa-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>listAttributes(vehicleList: <a href="../classes/Vehicle.html">Vehicle[]</a>, attributeArray: string[], attribute: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="131" class="link-to-prism">src/app/vehicle/vehicle.service.ts:131</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Make the lists and return a string array with the values that will populate the Radio Buttons</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>vehicleList</td>
                                                        <td>
                                                                    <code><a href="../classes/Vehicle.html" target="_self" >Vehicle[]</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            no
                                                    </td>
                                                    

                                                </tr>
                                                <tr>
                                                        <td>attributeArray</td>
                                                        <td>
                                                                    <code>string[]</code>
                                                        </td>
                                                    
                                                    <td>
                                                            no
                                                    </td>
                                                    

                                                </tr>
                                                <tr>
                                                        <td>attribute</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            no
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>string[]</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="makeLists"></a>
                        <span class="name">
                            <b>
                            makeLists
                            </b>
                            <a href="#makeLists"><span class="fa fa-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>makeLists()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="110" class="link-to-prism">src/app/vehicle/vehicle.service.ts:110</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>The &#39;List Maker&#39; cleans the arrays by making every item unique. these arrays will populate the Radio Buttons
for the filter this function is also called when the filters are changed, if the result of the change
is one item  then that&#39;s the selected item.</p>
</div>

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="tryGettingVehicles"></a>
                        <span class="name">
                            <b>
                            tryGettingVehicles
                            </b>
                            <a href="#tryGettingVehicles"><span class="fa fa-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>tryGettingVehicles()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="75" class="link-to-prism">src/app/vehicle/vehicle.service.ts:75</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Try getting the vehicles from the Data source, since this is an Observable we can conveniently subscribe to it and
do some stuff on the next(), err() and complete() methods.</p>
</div>

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="vehicleChoice"></a>
                        <span class="name">
                            <b>
                            vehicleChoice
                            </b>
                            <a href="#vehicleChoice"><span class="fa fa-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>vehicleChoice:     <code><a href="../classes/Vehicle.html" target="_self" >Vehicle</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../classes/Vehicle.html" target="_self" >Vehicle</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="23" class="link-to-prism">src/app/vehicle/vehicle.service.ts:23</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The chosen vehicle. This variable is being set once all Filter fields are filled.</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="vehicles"></a>
                        <span class="name">
                            <b>
                            vehicles
                            </b>
                            <a href="#vehicles"><span class="fa fa-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>vehicles:     <code><a href="../classes/Vehicle.html" target="_self" >Vehicle[]</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../classes/Vehicle.html" target="_self" >Vehicle[]</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>[]</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="18" class="link-to-prism">src/app/vehicle/vehicle.service.ts:18</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>A Container of Vehicles</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {Injectable} from &#x27;@angular/core&#x27;;
import {Vehicle} from &#x27;./verhicle.model&#x27;;
import * as trafficMeister from &#x27;../../assets/tm-data/index.js&#x27;;
import {Observable} from &#x27;rxjs/index&#x27;;
import {FilterService} from &#x27;../filter/filter.service&#x27;;
/**
 * The Vehicle Service is responsible for most of the data logic.
 * It gets the data, it&#x27;s also the job of the Service to keep track of the data and do some logic thing on them
 */
@Injectable({
  providedIn: &#x27;root&#x27;
})
export class VehicleService {
  /**
   * A Container of Vehicles
   * @type {Array}
   */
  vehicles: Vehicle[] &#x3D; [];
  /**
   * The chosen vehicle. This variable is being set once all Filter fields are filled.
   * @type {Vehicle}
   */
  vehicleChoice: Vehicle;

  /**
   * List of all unique types for the filter.
   * @ignore
   */
  private types: string[] &#x3D; [];
  /**
   * List of all unique types for the filter.
   * @ignore
   */
  private brands: string[] &#x3D; [];

  /**
   * List of all unique brands for the filter.
   * @ignore
   */
  private colors: string[] &#x3D; [];

  /**
   * Error variable to keep track of the errors
   * @ignore
   */
  private error &#x3D; null;
  /**
   * Variable to keep track of the loading &#x27;state&#x27;
   * @ignore
   */
  private loading &#x3D; true;
  /**
   * Variable to keep track of the total number of attempts to reconnect after an error
   * @ignore
   */
  private attempt &#x3D; 0;
  /**
   * Variable to set the maximum number of attempts
   * @ignore
   */
  private maxAttempts &#x3D; 3;

  /**
   * Construct with injecting the FilterService and try to get the vehicles from the data source right away.
   * @param sfService inject the Filter Service to be up to date with the changed filters
   */
  constructor(private sfService: FilterService) {
    this.tryGettingVehicles();
  }

  /**
   * Try getting the vehicles from the Data source, since this is an Observable we can conveniently subscribe to it and
   * do some stuff on the next(), err() and complete() methods.
   */
  tryGettingVehicles(): void {
    // get the subscription so we can unsubscribe when we are done.
    const subscription &#x3D; this.getVehiclesObservable()
    // subscribe to the Observable
      .subscribe(
        // If data is resolved then: Yay! Do the logic
        (data) &#x3D;&gt; {
          // Put data inside a variable for later reference
          this.vehicles &#x3D; data;
          // Make the list right away after successful fetching
          this.makeLists();
        },
        // Sometimes shit happens, try to be aware of that fact.
        (err) &#x3D;&gt; {
          if (this.canTry()) {
            this.tryGettingVehicles();
            this.raiseAttempts();
          } else {
            this.loading &#x3D; false;
            this.error &#x3D; err;
          }
          subscription.unsubscribe();
        },
        () &#x3D;&gt; {
          this.loading &#x3D; false;
          subscription.unsubscribe();
        }
      );
  }

  /**
   * The &#x27;List Maker&#x27; cleans the arrays by making every item unique. these arrays will populate the Radio Buttons
   * for the filter this function is also called when the filters are changed, if the result of the change
   * is one item  then that&#x27;s the selected item.
   */
  makeLists() {
    this.types &#x3D; this.listAttributes(this.filterDataList(), this.types, &#x27;type&#x27;);
    this.brands &#x3D; this.listAttributes(this.filterDataList(), this.brands, &#x27;brand&#x27;);
    this.colors &#x3D; this.listAttributes(this.filterDataList(), this.colors, &#x27;colors&#x27;);

    if (this.filterDataList().length &#x3D;&#x3D;&#x3D; 1) {
      this.filterDataList().map(vehicle &#x3D;&gt; this.vehicleChoice &#x3D; vehicle);
    } else {
      this.vehicleChoice &#x3D; null;
    }
  }


  /**
   * Make the lists and return a string array with the values that will populate the Radio Buttons
   *
   * @Param vehicleList: a list of vehicle object to iterate through whilst getting the values for the list
   * @Param attributeArray: A list of strings to hold the values for the Radio Buttons.
   * @Param attribute: A selector for the key that will be used to get the items for the attributeArray
   * @returns {string[]}
   */
  listAttributes(vehicleList: Vehicle[], attributeArray: string[], attribute: string): string[] {
    attributeArray &#x3D; [];
    // Iterate through the object and push the items to the array.
    vehicleList.forEach((vehicle: Vehicle) &#x3D;&gt; {
      attributeArray.push(vehicle[attribute]);
    });
    // remove any duplicate values, who needs that...?
    return this.cleanDuplicates(attributeArray);
  }

  /**
   * Just a method to filter the main vehicles array according to the parameter that were chosen in the filters
   */
  filterDataList(): Vehicle[] {
    return this.vehicles.filter((vehicle: Vehicle) &#x3D;&gt; {
      const typeCondition &#x3D; vehicle.type &#x3D;&#x3D;&#x3D; this.sfService.filters.type || this.sfService.isTypeEmpty();
      const brandCondition &#x3D; vehicle.brand &#x3D;&#x3D;&#x3D; this.sfService.filters.brand || this.sfService.isBrandEmpty();
      const colorCondition &#x3D; vehicle.colors.filter((color) &#x3D;&gt; color &#x3D;&#x3D;&#x3D; this.sfService.filters.color).length &gt; 0 || this.sfService.isColorEmpty();
      return typeCondition &amp;&amp; brandCondition &amp;&amp; colorCondition;
    });
  }

  /**
   * Clean duplicates in the lists with Array.filter and sort them alphabetically at the end, a little UX friendlier.
   * @param arr Provided array to clean dublicates.
   * @returns {any[]}
   */
  cleanDuplicates(arr: any[]): any[] {
    let tempArr &#x3D; [];
    if (Array.isArray(arr[0])) {
      arr.forEach((colorArr) &#x3D;&gt; {
        colorArr.forEach((color) &#x3D;&gt; {
          tempArr.push(color);
        });
      });
    } else {
      tempArr &#x3D; arr;
    }
    tempArr.sort();
    return tempArr.filter((item, itemIndex, me) &#x3D;&gt; itemIndex &#x3D;&#x3D;&#x3D; me.indexOf(item));
  }

  /**
   * Get the vehicleObservable to subscribe on. This method creates and Observabble, fetches the data, waits for
   * the callback function to react and then reply accordingly by nexting or erroring
   *
   * @returns {Observable&lt;Vehicle[]&gt;}
   */
  getVehiclesObservable(): Observable&lt;Vehicle[]&gt; {
    // Since the data API is a callback API I create an observable attach the observer to it and call next on it
    // when the data from the callback function is returned. Otherwise I throw an error that is being checked for
    // by the &#x27;Global Error Component&#x27;
    return Observable.create((observer) &#x3D;&gt; {
      trafficMeister.fetchData((err, data) &#x3D;&gt; {
        if (err) {
          observer.error(err);
        } else {
          observer.next(data as Vehicle[]);
        }
        observer.complete();
      });
    });
  }

  /**
   * This function return an error of any type so the outside world can read it an act accordingly
   * @returns {any}
   */
  hasError(): any {
    return this.error;
  }

  /**
   * This function returns the loading boolean &#x27;state&#x27;
   * @returns {boolean}
   */
  isLoading(): boolean {
    return this.loading;
  }

  /**
   * this function returns a boolean check to see if we can try again or the maximum atempts are reached.
   * @ignore
   */
  private canTry(): boolean {
    return this.attempt !&#x3D;&#x3D; this.maxAttempts;
  }

  /**
   * This function raises the attemptnumber when a try fails.
   * @ignore
   */
  private raiseAttempts(): void {
    this.attempt++;
  }
}
</code></pre>
    </div>

</div>









                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

        <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'VehicleService.html';
        </script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
       <script src="../js/search/search_index.js"></script>


    </body>
</html>
